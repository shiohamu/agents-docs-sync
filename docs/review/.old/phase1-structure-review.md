# フェーズ1: プロジェクト構造と設定ファイルのレビュー手順書

## レビューの目的
プロジェクトの構造、設定ファイル、依存関係管理の整合性を確認し、セットアップとメンテナンスの容易性を評価します。

## 対象ファイル・ディレクトリ

### 必須確認ファイル
- `pyproject.toml` - プロジェクトメタデータと依存関係
- `pytest.ini` - テスト設定
- `requirements-docgen.txt` - ドキュメント生成用依存関係
- `requirements-test.txt` - テスト用依存関係
- `docgen/config.yaml` - 設定ファイル（存在確認）
- `docgen/config.yaml.sample` - 設定ファイルテンプレート
- `setup.sh` - セットアップスクリプト
- `README.md` - プロジェクトドキュメント

### 参考確認ファイル
- `uv.lock` - uvによる依存関係ロックファイル（存在する場合）

## レビュー手順

### ステップ1: プロジェクト構造の確認

#### 1.1 ディレクトリ構造の確認
- [ ] プロジェクトルートに必要なディレクトリが存在するか確認
  - `docgen/` - コアモジュール
  - `tests/` - テストファイル
  - `scripts/` - 実行スクリプト
  - `.github/workflows/` - CI/CD設定
  - `docs/` - ドキュメント

#### 1.2 ファイル命名規則の一貫性
- [ ] Pythonファイル: `snake_case.py`
- [ ] テストファイル: `test_*.py`
- [ ] スクリプトファイル: `*.sh`（実行可能）

### ステップ2: 依存関係管理のレビュー

#### 2.1 pyproject.tomlの確認
- [ ] プロジェクトメタデータが正確か（name, version, description）
- [ ] `requires-python`が適切に設定されているか（>=3.12）
- [ ] `dependencies`セクションに必要なパッケージが記載されているか
- [ ] バージョン指定が適切か（`>=`の使用）

#### 2.2 requirementsファイルの確認
- [ ] `requirements-docgen.txt`の内容確認
  - [ ] コメントが適切に記載されているか
  - [ ] バージョン指定が適切か
  - [ ] オプショナルな依存関係がコメントで明記されているか
- [ ] `requirements-test.txt`の内容確認
  - [ ] テストに必要な依存関係が全て含まれているか
  - [ ] 他のrequirementsファイルとの重複が適切に管理されているか

#### 2.3 依存関係の整合性チェック
- [ ] `pyproject.toml`と`requirements-*.txt`の依存関係が一致しているか
- [ ] 重複している依存関係のバージョン指定が一致しているか
- [ ] 不足している依存関係がないか（例: `tomli`がコードで使用されているが依存関係に記載されていない）

### ステップ3: 設定ファイルのレビュー

#### 3.1 config.yamlの存在確認
- [ ] `docgen/config.yaml`が存在するか
- [ ] `docgen/config.yaml.sample`が存在するか
- [ ] `config.yaml`が`.gitignore`に含まれているか（機密情報を含む場合）

#### 3.2 config.yaml.sampleの確認
- [ ] 設定項目が適切にドキュメント化されているか
- [ ] デフォルト値が適切か
- [ ] 必須項目とオプション項目が明確か

#### 3.3 設定ファイルの自動生成機能
- [ ] `setup.sh`または`docgen.py`で`config.yaml`が自動生成されるか
- [ ] 自動生成時のエラーハンドリングが適切か

### ステップ4: セットアップスクリプトのレビュー

#### 4.1 setup.shの確認
- [ ] スクリプトが実行可能か（`#!/bin/bash`、`chmod +x`）
- [ ] エラーハンドリングが適切か（`set -e`の使用）
- [ ] 依存関係のインストール手順が正確か
- [ ] クロスプラットフォーム対応が考慮されているか
- [ ] ユーザーフレンドリーなメッセージが表示されるか

#### 4.2 セットアップ手順の確認
- [ ] README.mdのセットアップ手順が正確か
- [ ] 複数のインストール方法が提供されているか（uv, pip, pyproject.toml）
- [ ] 各方法の手順が明確に記載されているか

### ステップ5: pytest.iniの確認

#### 5.1 テスト設定の確認
- [ ] `testpaths`が適切に設定されているか
- [ ] `python_files`, `python_classes`, `python_functions`の命名規則が適切か
- [ ] `addopts`の設定が適切か（カバレッジレポートなど）
- [ ] マーカーが適切に定義されているか（unit, integration, slow）

### ステップ6: README.mdの確認

#### 6.1 ドキュメントの完全性
- [ ] プロジェクトの説明が正確か
- [ ] 使用技術が正確に記載されているか
- [ ] セットアップ手順が正確か
- [ ] プロジェクト構造の説明が正確か

#### 6.2 ドキュメントの整合性
- [ ] 記載されているファイルパスが実際に存在するか
- [ ] 記載されているコマンドが実際に動作するか
- [ ] 自動生成セクションと手動セクションが適切に区別されているか

## 確認チェックリスト

### 高優先度
- [ ] `config.yaml`が存在する、または自動生成される
- [ ] 依存関係の整合性（pyproject.toml vs requirements.txt）
- [ ] README.mdの内容が正確で最新

### 中優先度
- [ ] 依存関係の重複が適切に管理されている
- [ ] セットアップスクリプトのエラーハンドリング
- [ ] クロスプラットフォーム対応

### 低優先度
- [ ] コメントの充実度
- [ ] ドキュメントの詳細度

## レビュー結果の記録

### 発見された問題の記録形式
```markdown
#### 問題番号: [問題のタイトル]
- **重要度**: 高/中/低
- **場所**: [ファイルパス:行番号]
- **説明**: [問題の詳細説明]
- **影響**: [問題が及ぼす影響]
- **推奨対応**: [推奨される修正方法]
```

### 強みの記録形式
```markdown
#### 強み: [強みのタイトル]
- **場所**: [該当箇所]
- **説明**: [なぜ良いのか]
```

## 次のステップ
レビュー完了後、フェーズ2（コアモジュールのコードレビュー）に進みます。

